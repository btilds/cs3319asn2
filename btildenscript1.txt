SHOW DATABASES;
DROP DATABASE IF EXISTS btildenassign2db;
CREATE DATABASE btildenassign2db;
USE btildenassign2db;
GRANT USAGE ON *.* TO 'ta'@'localhost';
DROP USER 'ta'@'localhost';
CREATE USER 'ta'@'localhost' IDENTIFIED BY 'cs3319';
GRANT ALL PRIVILEGES ON btildenassign2db.* TO 'ta'@'localhost';
FLUSH PRIVILEGES;
SHOW TABLES;
CREATE TABLE hospital (code CHAR(3) NOT NULL, name VARCHAR(20), city VARCHAR(20), province CHAR(2), beds INT, licno VARCHAR(4), headstart DATE, PRIMARY KEY(code));
CREATE TABLE doctor (licno VARCHAR(4) NOT NULL, firstname VARCHAR(20), lastname VARCHAR(20), specialty VARCHAR(30), licdate DATE, code CHAR(3), PRIMARY KEY (licno), FOREIGN KEY (code) REFERENCES hospital (code));
ALTER TABLE hospital ADD FOREIGN KEY (licno) REFERENCES doctor (licno);
CREATE TABLE patient (ohtp INT NOT NULL, firstname VARCHAR(20), lastname VARCHAR(20), PRIMARY KEY (ohtp));
CREATE TABLE doctorpatient (ohtp INT NOT NULL, licno VARCHAR(4) NOT NULL, PRIMARY KEY(ohtp, licno), FOREIGN KEY (ohtp) REFERENCES patient (ohtp), FOREIGN KEY (licno) REFERENCES doctor (licno) ON DELETE CASCADE);
SHOW TABLES;
